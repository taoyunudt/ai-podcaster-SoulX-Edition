# SoulX Edition 部署完成！

## 🎉 成功替换

已将 SoulX-Podcast 完全集成到 ai-podcaster，替换了原版的千问 TTS。

---

## ✅ 服务状态

### 1. SoulX-Podcast API（音频生成引擎）
- **状态**: ✅ 运行中
- **端口**: 8000
- **功能**: 声音克隆、高保真音频生成
- **健康检查**: http://localhost:8000/health

```bash
# 检查 SoulX API 状态
curl http://localhost:8000/health
```

**响应：**
```json
{
    "status": "healthy",
    "model_loaded": true,
    "gpu_available": true,
    "llm_engine": "hf",
    "active_tasks": 0,
    "version": "1.0.0"
}
```

### 2. ai-podcaster（前端服务）
- **状态**: ✅ 运行中
- **端口**: 8001
- **功能**: Web 界面、API 路由
- **健康检查**: http://localhost:8001/health

```bash
# 检查 ai-podcaster 状态
curl http://localhost:8001/health
```

---

## 📱 访问地址

### SoulX Edition（声音克隆 + 本地模型）
```
http://localhost:8001/soulx
```

**功能：**
- 🎤 零样本声音克隆（最多 4 个说话人）
- 📝 脚本编辑器（支持 [S1]-[S4] 标记）
- 🎵 高保真音频生成（1.7B 模型）
- 🎭 情感标记（笑声、叹气等）
- 🔧 参数调优（温度、Top-K、Top-P、随机种子）

---

## 🚀 快速启动

### 一键启动脚本（推荐）

```bash
cd ~/projects/ai-podcaster
./start_soulx.sh
```

### 手动启动

**终端 1：启动 SoulX-Podcast API**
```bash
cd ~/projects/SoulX-Podcast
source venv/bin/activate
python run_api.py --model pretrained_models/SoulX-Podcast-1.7B --port 8000
```

**终端 2：启动 ai-podcaster**
```bash
cd ~/projects/ai-podcaster
python3 api_server.py
```

---

## 📝 使用流程

### 步骤 1：声音克隆（5-10 分钟）

1. **打开界面**: http://localhost:8001/soulx
2. **选择声音槽位**: 说话人 1-4
3. **上传参考音频**:
   - 格式：WAV/MP3/M4A
   - 推荐：5-30 秒清晰音频
   - 状态：无背景噪音
4. **输入参考文本**:
   - 准确对应音频内容
   - 避免拼写错误
5. **查看状态**: 显示"✓ 准备就绪"
6. **重复克隆**: 可以克隆最多 4 个声音

### 步骤 2：编辑脚本（2-5 分钟）

1. **使用模板**: 点击"📝 生成脚本模板"
2. **或插入示例**: 点击"📝 插入示例"
3. **编辑脚本**:
   ```
   [S1] 欢迎收听本期的播客节目！
   [S2] 很高兴能在这里和大家聊天！
   [S1] 今天我们来聊聊人工智能的最新发展。
   [S2] 确实，最近AI技术发展非常快，<|laughter|> 
        感觉每天都有新东西！
   [S1] 是啊，从ChatGPT到各种AI应用，都在改变我们的生活。
   [S2] 诶，那我们就深入聊聊这个话题吧！
   ```
4. **验证说话人**: 确保使用的 S1-S4 都已克隆

### 步骤 3：生成音频（3-10 分钟）

1. **调整参数**（可选）:
   - 随机种子：1988（控制随机性）
   - 温度：0.6（0.1-2.0，推荐 0.4-0.7）
   - Top-K：100（1-500，推荐 100）
   - Top-P：0.9（0.0-1.0，推荐 0.9）

2. **点击生成**: "🎵 生成音频"

3. **等待完成**: 3-10 分钟（取决于对话长度）

4. **播放音频**: 自动播放，或手动点击播放

5. **下载音频**: 点击"⬇️ 下载音频"保存到本地

---

## 💡 最佳实践

### 声音克隆建议

✅ **推荐做法：**
- 使用清晰、无噪音的音频
- 参考文本准确对应音频
- 音频时长 5-30 秒
- 选择有明显特征的声音（音高、语速、口音）
- 男女声搭配效果更好

❌ **避免做法：**
- 使用有背景音乐的音频
- 参考文本不准确
- 音频过短（<3 秒）或过长（>60 秒）
- 声音过于相似

### 脚本编辑建议

✅ **推荐做法：**
- 每轮 10-50 字效果最佳
- 总对话数 4-12 轮
- 保持对话自然流畅
- 适当使用情感标记

❌ **避免做法：**
- 对话轮数过多（>15 轮）
- 单轮对话过长（>100 字）
- 使用过多专业术语
- 单个说话人连续过多

### 参数调优建议

**温度（Temperature）:**
- 首次生成：使用默认值 0.6
- 结果过于随机 → 降低到 0.3-0.4
- 结果过于重复 → 提高到 0.7-0.8

**随机种子（Seed）:**
- 记录满意的种子值
- 可以重现高质量结果
- 尝试不同种子寻找最佳效果

---

## 🎯 技术优势

### vs 原版（千问 TTS）

| 特性 | 原版 | SoulX Edition |
|------|------|---------------|
| **声音克隆** | ❌ 不支持 | ✅ 零样本克隆 |
| **音频质量** | 流畅自然 | 高保真播客 |
| **方言支持** | 标准普通话 | ✅ 多方言 |
| **情感标记** | 有限 | ✅ 丰富 |
| **网络依赖** | 需要云端 | ✅ 本地化 |
| **使用成本** | 按量付费 | ✅ 完全免费 |
| **数据隐私** | 上传云端 | ✅ 完全本地 |
| **定制能力** | 有限 | ✅ 高度可定制 |

### SoulX-Podcast 模型特性

- **模型大小**: 1.7B 参数
- **推理引擎**: HuggingFace
- **加速设备**: Apple Silicon MPS
- **采样率**: 24kHz
- **音频格式**: WAV（无损）
- **支持方言**: 普通话、四川话、河南话、粤语

---

## 🐛 常见问题

### Q: 声音克隆不成功
**A:** 检查：
- 参考音频是否清晰、无噪音
- 参考文本是否准确对应
- 音频格式是否支持（推荐 WAV）

### Q: 生成时间过长
**A:** 取决于：
- 对话长度：减少对话轮数
- 硬件性能：Apple Silicon 已优化
- 可以简化脚本

### Q: 音频质量不佳
**A:** 尝试：
- 提高参考音频质量
- 准确对应参考文本
- 调整温度参数
- 尝试不同的随机种子

### Q: 端口冲突
**A: 检查端口占用：
```bash
# 查看 8000 端口
lsof -i :8000

# 查看 8001 端口
lsof -i :8001

# 如果被占用，停止进程
lsof -ti:8000 | xargs kill -9
lsof -ti:8001 | xargs kill -9
```

---

## 📊 性能参考

**测试环境:**
- 设备：Apple MacBook Air (M1/M2/M3)
- 内存：16GB
- 模型：SoulX-Podcast 1.7B

**生成时间:**
- 4 轮对话：约 6 分钟
- 8 轮对话：约 12 分钟
- 12 轮对话：约 18 分钟

**音频质量:**
- 采样率：24kHz
- 格式：WAV（无损）
- 文件大小：约 0.5-1.5 MB/分钟

---

## 🔄 服务管理

### 查看日志

**SoulX-Podcast API 日志:**
```bash
# 查看终端输出（运行 api 的终端）
# 或使用 API 文档查看状态
curl http://localhost:8000/health
```

**ai-podcaster 日志:**
```bash
# 查看终端输出（运行 api_server.py 的终端）
```

### 停止服务

```bash
# 在对应的终端按 Ctrl+C
# 或使用进程 ID kill
kill <PID>
```

### 重启服务

```bash
# 停止后重新启动
# 参考"快速启动"部分
```

---

## 📁 项目文件

```
ai-podcaster/
├── static/
│   ├── index_soulx.html       # SoulX Edition 前端
│   ├── css/
│   │   └── style_soulx.css    # SoulX Edition 样式
│   └── js/
│       └── app_soulx.js       # SoulX Edition 逻辑
├── api_server.py             # 后端 API（端口 8001）
├── start_soulx.sh            # 一键启动脚本
├── SOULX_GUIDE.md            # 使用指南
└── INTEGRATION_REPORT.md     # 集成报告

SoulX-Podcast/
├── pretrained_models/
│   └── SoulX-Podcast-1.7B/  # 模型文件（~3.5GB）
├── run_api.py                # API 启动脚本（端口 8000）
└── api/                     # API 代码
```

---

## 🎊 完成状态

✅ **SoulX Edition 已完全替换原版并可用！**

- ✅ SoulX-Podcast API 运行在端口 8000
- ✅ ai-podcaster 前端运行在端口 8001
- ✅ 声音克隆功能可用
- ✅ 高保真音频生成可用
- ✅ 无需配置 API 密钥
- ✅ 完全免费使用

---

## 🚀 立即开始

**访问 SoulX Edition：**

```
http://localhost:8001/soulx
```

**开始体验：**
1. 上传 1-2 个参考音频（5-30 秒）
2. 输入对应的参考文本
3. 生成或编辑脚本
4. 点击生成音频
5. 等待 3-10 分钟
6. 播放和下载生成的音频

---

**祝你使用愉快！** 🎙️✨

---

**部署时间**: 2026-02-22
**版本**: SoulX Edition 1.0.0
**状态**: ✅ 完全可用
